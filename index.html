<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <!-- Viewport optimizado para móvil/ notch -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Simulador Hipotecario | Tu Casa 2025</title>
  <meta name="description" content="Simula tu crédito hipotecario y recibe asesoría sin costo. Precalificación en minutos." />
  <!-- Colorea UI del navegador en móvil -->
  <meta name="theme-color" content="#0A1F44">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#0A1F44;/* azul marino de marca */
      --accent:#D4AF37;/* dorado */
      --bg:#f6f8fb;
      --text:#1c2240;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
      background:var(--bg);color:var(--text);
      -webkit-text-size-adjust:100%; /* evita zoom raro en iOS */
    }

    header{position:sticky;top:0;z-index:20;background:#fff;border-bottom:1px solid #e6e8ee}
    .wrap{max-width:1100px;margin:auto;padding:18px 20px}
    .row{display:flex;gap:20px;align-items:center;justify-content:space-between}
    .site-title{margin:0;font-weight:800;letter-spacing:.2px;color:var(--brand);font-size:clamp(20px,2.8vw,28px);line-height:1.2}

    .hero{background:linear-gradient(180deg,#ffffff, #eef2f8);border-bottom:1px solid #e6e8ee}
    .hero .wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center}
    .hero h1{font-size:clamp(24px,3.5vw,38px);margin:6px 0;color:var(--brand)}
    .hero p{color:#48506b;line-height:1.6;margin-top:8px}
    .badge{display:inline-block;background:#fff;border:1px solid #e8e9f1;color:#3b4566;padding:6px 10px;border-radius:10px;font-size:12px}

    .card{background:#fff;border:1px solid #e6e8ee;border-radius:16px;box-shadow:0 6px 16px rgba(10,31,68,.05)}
    .panel{padding:18px}
    label{font-size:14px;color:#3b4566;margin-bottom:6px;display:block}

    input,select{
      width:100%;
      padding:12px 12px;
      border:1px solid #d7dbe7;border-radius:10px;font-size:16px; /* >=16px para evitar auto-zoom iOS */
    }
    input:focus,select:focus{outline:3px solid rgba(10,31,68,.1);border-color:var(--brand)}

    .grid{display:grid;gap:14px}
    .grid.two{grid-template-columns:1fr 1fr}

    .btn{display:inline-flex;justify-content:center;align-items:center;gap:10px;width:100%;padding:12px;border-radius:12px;border:none;background:var(--brand);color:#fff;font-weight:700;cursor:pointer;font-size:16px}
    .btn.alt{background:#ffffff;color:var(--brand);border:1px solid #d7dbe7}
    .muted{font-size:12px;color:#66708f}

    .result{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .stat{background:#f5f8ff;border:1px dashed #d5dcf0;border-radius:12px;padding:10px 12px}
    .stat b{display:block;color:var(--brand);font-size:18px;margin-top:6px}

    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .chip{font-size:12px;border:1px solid #e2e6f2;border-radius:999px;padding:6px 10px;background:#fff}

    .iframe-wrap{border:1px dashed #cfd6ea;border-radius:12px;overflow:hidden}
    iframe{width:100%;height:740px;border:0}

    footer{padding:40px 20px;color:#66708f;text-align:center}

    /* ======= MÓVIL: ajustes responsivos ======= */
    @media (max-width:900px){
      .wrap{padding:14px 16px}
      .hero .wrap{grid-template-columns:1fr;gap:16px}
      .hero h1{font-size:24px}
      .site-title{font-size:22px}
      .grid.two{grid-template-columns:1fr} /* apilar inputs */
      .result{grid-template-columns:1fr}   /* estadísticas en 1 columna */
      iframe{height:420px}                 /* menos alto en móvil */
      .panel{padding:14px}
      .badge{font-size:11px;padding:5px 8px}
      .chip{font-size:11px;padding:5px 8px}
      footer{padding:18px 12px}
    }

    /* Móviles MUY pequeños (altura limitada) */
    @media (max-height:650px){
      .hero p{margin-top:6px;line-height:1.4}
      .panel{padding:12px}
      iframe{height:360px}
    }

    /* Barra fija de acción (solo móvil) */
    .mobile-cta{
      position:fixed;bottom:env(safe-area-inset-bottom,0);left:0;right:0;
      background:#fff;border-top:1px solid #e6e8ee;display:none;z-index:50;
    }
    .mobile-cta .wrap{
      display:flex;gap:10px;align-items:center;justify-content:center;padding:10px 14px;
    }
    .mobile-cta a{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 12px;border-radius:999px;text-decoration:none;font-weight:700;
      border:1px solid #d7dbe7;
    }
    .mobile-cta a.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .mobile-cta a.secondary{background:#fff;color:var(--brand)}

    @media (max-width:900px){
      .mobile-cta{display:block}
      body{padding-bottom:68px} /* espacio para barra fija */
    }

    /* Utilidad para ocultar en desktop / mostrar en móvil */
    .mobile-only{display:none}
    @media (max-width:900px){ .mobile-only{display:block}
                            }
    /* Oculta la sección informativa en pantallas móviles */
.extra-info { display: block; }
@media (max-width: 900px){
  .extra-info { display: none; }
}
    /* Ocultar en dispositivos móviles */
    /* Oculta solo el bloque de texto de la hero en pantallas móviles */
@media (max-width:900px){
  .hero-text-mobile-hide { display:none !important; }
}




  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <!-- TÍTULO ARRIBA, ALINEADO A LA IZQUIERDA -->
      <h1 class="site-title">Para Comprar una Casa, Te decimos cuanto pagarías al mes</h1>
    </div>
  </header>

  <section class="hero">
    <div class="wrap">
      <div>
        <div class="hero-text-mobile-hide">
        <span class="badge">Precalificación gratuita · Respuesta en minutos</span>
        <h1>Simula tu crédito hipotecario y da el primer paso a tu casa propia</h1>

        <p>
          Compara y calcula tu mensualidad aproximada. Al finalizar, envía tus resultados por WhatsApp para recibir asesoría sin costo.
        </p>
        <div class="chips">
          <span class="chip">Tasa fija</span>
          <span class="chip">Plazos 5–20 años</span>
          <span class="chip">Transparencia total</span>
        </div>
          </div>
      </div>

      <div class="card">
        <div class="panel">
          <!-- Simulador propio -->
          <div id="local-sim" class="grid" style="margin-top:6px">
            <div class="grid two">
              <div>
                <label for="valor">Valor de la vivienda (MXN)</label>
                <input type="number" id="valor" placeholder="Ej. 1000000" min="0" inputmode="decimal">
              </div>
              <div>
                <label for="enganche">Enganche (%)</label>
                <input type="number" id="enganche" placeholder="20" min="0" max="95" step="0.1" inputmode="decimal">
              </div>
            </div>
            <div class="grid two">
              <div>
                <label for="plazo">Plazo (años)</label>
                <select id="plazo">
                  <option value="5">5</option>
                  <option value="10" selected>10</option>
                  <option value="15">15</option>
                  <option value="20">20</option>
                </select>
              </div>
            </div>
            <button class="btn" id="btn-calcular">Calcular mensualidad</button>
            <div class="result" id="resultado" aria-live="polite"></div>
            <button class="btn alt" id="btn-wa" style="display:none">Enviar resultados por WhatsApp</button>
            <p class="muted">* Cálculo referencial. No incluye gastos notariales ni variaciones por seguros o comisiones. Consulta el CAT informativo de cada institución.</p>
          </div>

          <!-- Opción: Iframe HSBC (opcional) -->
          <div id="iframe-sim" style="display:none">
            <div class="grid">
              <div>
                <label for="hsbcUrl">Pega aquí la URL del simulador de HSBC</label>
                <input type="url" id="hsbcUrl" placeholder="https://..." inputmode="url" />
              </div>
              <button class="btn" id="btn-embed">Mostrar simulador HSBC</button>
            </div>
            <div class="iframe-wrap" id="iframeWrap" style="display:none;margin-top:12px">
              <iframe id="hsbcFrame" title="Simulador HSBC"></iframe>
            </div>
            <p class="muted" style="margin-top:10px">Nota: La disponibilidad de inserción depende de las políticas del sitio de HSBC. Si no se muestra, usa el <a href="#" id="openExternal">enlace externo</a>.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
<section class="wrap extra-info" style="margin-top:26px">


    <div class="row" style="align-items:flex-start;gap:26px">
      <div class="card" style="flex:1">
        <div class="panel">
          <h3 style="margin:0 0 8px;color:var(--brand)">¿Cómo funciona el cálculo?</h3>
          <p style="margin:0">Usamos la fórmula de anualidad fija para hipotecas: pago mensual = <em>P·i / (1 - (1+i)^-n)</em>, donde <em>P</em> es el monto a financiar, <em>i</em> la tasa mensual y <em>n</em> el número de pagos.</p>
        </div>
      </div>
      <div class="card" style="flex:1">
        <div class="panel">
          <h3 style="margin:0 0 8px;color:var(--brand)">Asesoría sin costo</h3>
          <p style="margin:0">Te acompañamos desde la precalificación hasta la firma de escrituras. Comparativa entre múltiples bancos, sin compromiso.</p>
        </div>
      </div>
    </div>
  </section>

  <footer>
    © <span id="y"></span> Créditos Hipotecarios · Atención por WhatsApp:
    <a href="https://wa.me/526863240420" target="_blank" rel="noopener">686 324 0420</a> ·
    <a href="https://wa.me/526861140464" target="_blank" rel="noopener">686 114 0464</a>
  </footer>

  <!-- Barra fija de acción solo en móvil -->
  <div class="mobile-cta" aria-label="Acciones rápidas en móvil">
    <div class="wrap">
      <a class="secondary" href="https://wa.me/526861140464?text=Hola,%20quiero%20mi%20precalificaci%C3%B3n%20hipotecaria" target="_blank" rel="noopener" aria-label="WhatsApp 686 114 0464">
        <!-- ícono WA ligero -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.5 3.5A11.9 11.9 0 0 0 12 0C5.5 0 .2 5.3 .2 11.9c0 2.1.6 4.1 1.6 6L0 24l6.3-1.9a12 12 0 0 0 5.7 1.4c6.5 0 11.9-5.3 11.9-11.9 0-3.2-1.3-6.2-3.4-8.1zM12 21.5a9.9 9.9 0 0 1-5-1.4l-.4-.2-3.8 1.1 1.1-3.7-.2-.4A9.9 9.9 0 1 1 12 21.5zm5.7-7.3c-.3-.2-1.8-.9-2.1-1-.3-.1-.5-.2-.7.2-.2.3-.8 1-1 1.2-.2.2-.4.2-.7.1-.3-.1-1.3-.5-2.4-1.5-.9-.8-1.5-1.7-1.7-2 0-.3 0-.5.1-.6.1-.1.3-.3.4-.5.1-.2.2-.3.3-.5.1-.2.1-.4 0-.6-.1-.2-.7-1.6-.9-2.2-.3-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.8.3-.3.3-1.1 1.1-1.1 2.6s1.1 2.9 1.2 3.1c.2.2 2.1 3.3 5.2 4.6.7.3 1.3.5 1.7.6.7.2 1.4.2 1.9.1.6-.1 1.8-.7 2.1-1.4.3-.7.3-1.3.2-1.5 0-.1-.2-.2-.5-.3z"/></svg>
        686 114 0464
      </a>
      <a class="primary" href="https://wa.me/526863240420?text=Hola,%20quiero%20mi%20precalificaci%C3%B3n%20hipotecaria" target="_blank" rel="noopener" aria-label="WhatsApp 686 324 0420">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.5 3.5A11.9 11.9 0 0 0 12 0C5.5 0 .2 5.3 .2 11.9c0 2.1.6 4.1 1.6 6L0 24l6.3-1.9a12 12 0 0 0 5.7 1.4c6.5 0 11.9-5.3 11.9-11.9 0-3.2-1.3-6.2-3.4-8.1zM12 21.5a9.9 9.9 0 0 1-5-1.4l-.4-.2-3.8 1.1 1.1-3.7-.2-.4A9.9 9.9 0 1 1 12 21.5zm5.7-7.3c-.3-.2-1.8-.9-2.1-1-.3-.1-.5-.2-.7.2-.2.3-.8 1-1 1.2-.2.2-.4.2-.7.1-.3-.1-1.3-.5-2.4-1.5-.9-.8-1.5-1.7-1.7-2 0-.3 0-.5.1-.6.1-.1.3-.3.4-.5.1-.2.2-.3.3-.5.1-.2.1-.4 0-.6-.1-.2-.7-1.6-.9-2.2-.3-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.8.3-.3.3-1.1 1.1-1.1 2.6s1.1 2.9 1.2 3.1c.2.2 2.1 3.3 5.2 4.6.7.3 1.3.5 1.7.6.7.2 1.4.2 1.9.1.6-.1 1.8-.7 2.1-1.4.3-.7.3-1.3.2-1.5 0-.1-.2-.2-.5-.3z"/></svg>
        686 324 0420
      </a>
    </div>
  </div>

  <script>
    const peso = new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN', maximumFractionDigits: 2 });
    const tasaFija = 0.115; // 11.5% anual fijo
    const qs = id => document.getElementById(id);
    qs('y').textContent = new Date().getFullYear();

    // iOS: asegura que los inputs no disparen zoom por tamaños pequeños
    // (ya usamos font-size:16px, esto es por si el navegador ignora la regla)
    document.querySelectorAll('input, select').forEach(el=>{
      el.addEventListener('focus', ()=>{
        document.documentElement.style.setProperty('--fix-ios-zoom','1');
      });
      el.addEventListener('blur', ()=>{
        document.documentElement.style.removeProperty('--fix-ios-zoom');
      });
    });

    // Cálculo
    qs('btn-calcular').addEventListener('click', ()=>{
      const valor = parseFloat(qs('valor').value || '0');
      const eng = parseFloat(qs('enganche').value || '0')/100;
      const plazo = parseInt(qs('plazo').value || '0');

      if(!valor || valor<=0){alert('Ingresa el valor de la vivienda'); return}
      // Validación mínima 10 %
      if(eng < 0.10){ alert('El enganche debe ser mínimo del 10 %'); return }
      if(eng >= 0.95){ alert('Ingresa un enganche menor al 95 %'); return }
      if(!plazo){alert('Selecciona un plazo'); return}

      const P = valor * (1 - eng);
      const n = plazo * 12;
      const i = tasaFija / 12;
      const mensual = (P * i) / (1 - Math.pow(1+i, -n));
      const total = mensual * n;

      const res = qs('resultado');
      res.innerHTML = `
        <div class="stat"><span>Monto a financiar</span><b>${peso.format(P)}</b></div>
        <div class="stat"><span>Mensualidad estimada</span><b>${peso.format(mensual)}</b></div>
        <div class="stat"><span>Pagos totales</span><b>${n.toLocaleString('es-MX')} meses</b></div>
        <div class="stat"><span>Costo total (capital+intereses)</span><b>${peso.format(total)}</b></div>
      `;

      // WhatsApp
      const texto = encodeURIComponent(
        `Hola, quiero asesoría para mi crédito hipotecario.\n\n`+
        `Valor vivienda: ${peso.format(valor)}\n`+
        `Enganche: ${(eng*100).toFixed(1)}%\n`+
        `Plazo: ${plazo} años\n`+
        `Tasa anual: ${(tasaFija*100).toFixed(2)}%\n`+
        `Monto a financiar: ${peso.format(P)}\n`+
        `Mensualidad estimada: ${peso.format(mensual)}\n`
      );
      const wa = qs('btn-wa');
      wa.onclick = ()=> window.open(`https://wa.me/526863240420?text=${texto}`, '_blank');
      wa.style.display='inline-flex';
    });

    // Iframe HSBC (opcional)
    const btnEmbed = qs('btn-embed');
    const urlInput = qs('hsbcUrl');
    const iwrap = qs('iframeWrap');
    const iframe = qs('hsbcFrame');
    const openExternal = qs('openExternal');

    if(btnEmbed){
      btnEmbed.addEventListener('click', ()=>{
        const url = (urlInput.value||'').trim();
        if(!url){alert('Pega la URL completa del simulador de HSBC');return}
        try{ new URL(url); }catch(e){ alert('La URL no es válida'); return }
        iframe.src = url;
        iwrap.style.display='block';
        openExternal.href = url;
        openExternal.target = '_blank';
        openExternal.rel = 'noopener';
      });
    }
  </script>
</body>
</html>
